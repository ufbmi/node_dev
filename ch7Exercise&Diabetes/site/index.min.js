var canvas,stage,exportRoot;var LANG="en";var urlParams={};function forceES(){LANG="es";init()}function init(){createjs.Ticker.setFPS(30);createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED;storytext=(LANG=="en")?storytext_en:storytext_es;$(window).resize(resizeCanvasLocal);resizeCanvasLocal();window.addEventListener("orientationchange",function(){setTimeout(resizeCanvasLocal,100)},false);createjs.MotionGuidePlugin.install();canvas=document.getElementById("canvas");images=images||{};sounds=[];var a=new createjs.LoadQueue(false);a.installPlugin(createjs.Sound);createjs.Sound.alternateExtensions=["ogg"];a.addEventListener("fileload",handleFileLoad);a.addEventListener("complete",loadSounds);a.loadManifest(lib.properties.manifest)}function handleFileLoad(a){if(a.item.type=="image"){images[a.item.id]=a.result}}function loadSounds(){sndch=createjs.Sound;sndch_fx=createjs.Sound;sndch_bg1=createjs.Sound;sndch_bg2=createjs.Sound;sndQ=new createjs.LoadQueue(false);sndQ.addEventListener("complete",sndQ_handleComplete);sndQ.addEventListener("fileload",sndQ_handleFileLoad);createjs.Sound.registerSound("snd_"+LANG+"/screen1.mp3","screen1");createjs.Sound.registerSound("snd_"+LANG+"/screen2.mp3","screen2");createjs.Sound.registerSound("snd_"+LANG+"/screen3.mp3","screen3");createjs.Sound.registerSound("snd_"+LANG+"/screen4.mp3","screen4");createjs.Sound.registerSound("snd_"+LANG+"/screen5.mp3","screen5");createjs.Sound.registerSound("snd_sfx/snd_buttonclick.mp3","sfx_btnclick");createjs.Sound.registerSound("snd_sfx/click6.mp3","click6");createjs.Sound.registerSound("snd_sfx/brain_effect.mp3","brain_effect");createjs.Sound.registerSound("snd_sfx/done_bell.mp3","done_bell");createjs.Sound.registerSound("snd_sfx/hearbeat1.mp3","hearbeat1");createjs.Sound.registerSound("snd_sfx/heart_effect.mp3","heart_effect");createjs.Sound.registerSound("snd_sfx/insulin_race.mp3","insulin_race");createjs.Sound.registerSound("snd_sfx/rope_mix.mp3","rope_mix");sndQ.load()}function sndQ_handleFileLoad(a){sounds[a.item.id]=a.result}function sndQ_handleComplete(a){loadingAllDone()}function loadingAllDone(){exportRoot=new lib.exercise();stage=new createjs.Stage(canvas);stage.enableMouseOver(20);stage.mouseMoveOutside=true;isTouch=createjs.Touch.isSupported();createjs.Touch.enable(stage,true,false);stage.addChild(exportRoot);stage.update();createjs.Ticker.setFPS(lib.properties.fps);createjs.Ticker.addEventListener("tick",stage)}function playSound(b,a){sndch=createjs.Sound.play(b)}function stopSound(){sndch.stop()}function playSfx(a){sndch_fx=createjs.Sound.play(a,{volume:0.4})}function stopSfx(){sndch_fx.stop()}function playSfxVol(b,a){sndch_fx=createjs.Sound.play(b,{volume:a})}function playSfxBg(b,a){if(a==1){sndch_bg1=createjs.Sound.play(b,{volume:0.15})}else{if(a==2){sndch_bg2=createjs.Sound.play(b,{volume:0.333})}}}function resizeCanvasLocal(){var a=$("#canvas");var b=($(window).width()-a.width())/2;$("#storytxt").css({width:(a.width()*0.75)+"px",top:(a.height()*0.825)+"px",left:(a.width()*0.125)+b+"px"});change_storytext()}function addHandHover(a){a.addEventListener("mouseover",cursorPointer);a.addEventListener("rollover",cursorPointer);a.addEventListener("mouseout",cursorDefault);a.addEventListener("rollout",cursorDefault)}function removeHandHover(a){a.removeEventListener("mouseover",cursorPointer);a.removeEventListener("rollover",cursorPointer);a.removeEventListener("mouseout",cursorDefault);a.removeEventListener("rollout",cursorDefault)}function cursorPointer(a){document.body.style.cursor="pointer"}function cursorDefault(a){document.body.style.cursor="default"}function begin_pulseObj(a){a.startSX=a.scaleX;a.startSY=a.scaleY;createjs.Tween.get(a,{loop:true}).to({scaleX:a.scaleX*1.1,scaleY:a.scaleY*1.1},250,createjs.Ease.none).wait(250).to({scaleX:a.startSX,scaleY:a.startSY},250,createjs.Ease.none).wait(250)}function end_pulseObj(a){createjs.Tween.removeTweens(a);a.scaleX=a.startSX||1;a.scaleY=a.startSY||1}function enableBtn(b,a){b.mouseEnabled=a;b.alpha=a?1:0.25};